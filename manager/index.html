<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>RPG DREAM MANAGER</title>
<style>
:root {
  --bg: #0b0718;
  --panel: #16102a;
  --primary: #7b5cff;
  --primary-dark: #5a3fe0;
  --text: #efeaff;
  --muted: #b7b0e6;
}
* { box-sizing: border-box; }
body {
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
}
.container {
  max-width: 420px;
  margin: auto;
  padding: 24px;
}
h1 {
  text-align:center;
  letter-spacing:2px;
  margin-bottom: 20px;
}
button {
  width:100%;
  padding:16px;
  margin-bottom:12px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background: var(--primary);
  color:white;
}
button.secondary {
  background: transparent;
  border:1px solid var(--primary);
}
button.option {
  background: #1f163d;
  border:1px solid #3a2b7a;
}
button.option.active {
  background: var(--primary);
}
.card {
  background: var(--panel);
  padding:16px;
  border-radius:14px;
  margin-bottom:12px;
}
.project-meta {
  font-size:13px;
  color: var(--muted);
}
.hidden { display:none !important; }
input {
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:10px;
  border:none;
}
.section {
  margin-bottom:18px;
}
.section label {
  display:block;
  margin-bottom:8px;
  opacity:0.85;
}
.grid {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
}
.footer {
  position: sticky;
  bottom: 0;
  background: linear-gradient(transparent, var(--bg) 40%);
  padding-top: 16px;
}
</style>
</head>
<body>

<div class="container" id="boot">
  <h1>RPG DREAM MANAGER</h1>

  <button id="btnNew">New Project</button>

  <div id="recentContainer"></div>

  <div class="footer">
    <button class="secondary" id="btnLoad">Load Project</button>
  </div>
</div>

<div class="container hidden" id="newProject">
  <div class="card">
    <h2>New Project</h2>

    <input id="projectName" placeholder="Project Name"/>

    <div class="section">
      <label>View Type</label>
      <button class="option active" data-view="topdown">Top View</button>
      <button class="option" data-view="angular">Angular View</button>
    </div>

    <div class="section">
      <label>Grid Preset</label>
      <button class="option active" data-grid="small">Small Grid</button>
      <button class="option" data-grid="medium">Medium Grid</button>
      <button class="option" data-grid="large">Large Grid</button>
    </div>

    <div class="section">
      <label>Tile Size</label>
      <div class="grid">
        <button class="option active" data-tile="32">32</button>
        <button class="option" data-tile="48">48</button>
        <button class="option" data-tile="64">64</button>
        <button class="option" data-tile="16">16</button>
        <button class="option" data-tile="96">96</button>
        <button class="option" data-tile="128">128</button>
      </div>
    </div>

    <button id="btnCreate">Create</button>
    <button class="secondary" id="btnBackFromNew">Back</button>
  </div>
</div>

<script>
const boot = document.getElementById('boot');
const newProject = document.getElementById('newProject');
const recentContainer = document.getElementById('recentContainer');

let viewType = "topdown";
let gridPreset = "small";
let tileSize = 32;

function getProjects() {
  return JSON.parse(localStorage.getItem("rpgdream_projects") || "[]");
}

function saveProjects(projects) {
  localStorage.setItem("rpgdream_projects", JSON.stringify(projects));
}

function renderRecent() {
  const projects = getProjects();
  recentContainer.innerHTML = "";

  if (!projects.length) {
    recentContainer.innerHTML = "<p class='project-meta'>No projects yet.</p>";
    return;
  }

  projects.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `<strong>${p.name}</strong>
      <div class="project-meta">${p.view} â€¢ ${p.tile}px</div>`;
    card.onclick = () => alert("Load project: " + p.name);
    recentContainer.appendChild(card);
  });
}

function activate(group, btn) {
  group.forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

document.getElementById('btnNew').onclick = () => {
  boot.classList.add('hidden');
  newProject.classList.remove('hidden');
};

document.getElementById('btnBackFromNew').onclick = () => {
  newProject.classList.add('hidden');
  boot.classList.remove('hidden');
};

document.querySelectorAll('[data-view]').forEach(btn => {
  btn.onclick = () => {
    viewType = btn.dataset.view;
    activate(document.querySelectorAll('[data-view]'), btn);
  };
});

document.querySelectorAll('[data-grid]').forEach(btn => {
  btn.onclick = () => {
    gridPreset = btn.dataset.grid;
    activate(document.querySelectorAll('[data-grid]'), btn);
  };
});

document.querySelectorAll('[data-tile]').forEach(btn => {
  btn.onclick = () => {
    tileSize = btn.dataset.tile;
    activate(document.querySelectorAll('[data-tile]'), btn);
  };
});

document.getElementById('btnCreate').onclick = () => {
  const name = document.getElementById('projectName').value.trim();
  if (!name) return alert("Project name required");

  const projects = getProjects();
  projects.unshift({ name, view: viewType, grid: gridPreset, tile: tileSize });
  saveProjects(projects.slice(0, 10));
  renderRecent();
  newProject.classList.add('hidden');
  boot.classList.remove('hidden');
};

renderRecent();
</script>

</body>
</html>
